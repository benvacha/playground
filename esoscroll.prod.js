/* esoScroll : github.com/esocode/esoscroll : v1.0.0 : Jan 2014 : esoCode : esocode.com */
(function(b){var a={init:function(c){return this.each(function(){var e=b(this);e.data("esoScroll",b.extend({onAtTop:null,onAtBottom:null,onStart:null,onMove:null,onStop:null,onStopDelay:100,onUnder:null,underOffset:0,underOffsetter:null,onOver:null,overOffset:0,overOffsetter:null,startOffset:null,startOffsetter:null},c,e.data("esoScroll")));var d=e.data("esoScroll");if(this==document||this==window){d.scrollingPage=true;d.scrollingElement=false;d.document=b(document);d.window=b(window)}d.underScroll=0;d.overScroll=0;if(d.startOffset&&d.startOffsetter){e.scrollTop(d.startOffset+d.startOffsetter.height())}else{if(d.startOffset){e.scrollTop(d.startOffset)}else{if(d.startOffsetter){e.scrollTop(d.startOffsetter.height())}}}d.touches=0;e.on("touchstart",a._onTouchStart);e.on("touchend",a._onTouchEnd);e.on("scroll touchmove",a._onScroll);a._refreshScrollData.apply(this)})},_refreshScrollData:function(){var g=b(this),e=g.data("esoScroll");var f=g.scrollTop();var d,c;if(e.scrollingPage){d=e.document.height();c=e.window.height()}else{d=this.scrollHeight;c=g.height()}e.prevUnderScroll=e.underScroll;e.prevOverScroll=e.overScroll;e.underScroll=0+e.underOffset-f;if(e.underOffsetter){e.underScroll+=e.underOffsetter.height()}e.overScroll=f+c+e.overOffset-d;if(e.overOffsetter){e.overScroll+=e.overOffsetter.height()}},_checkStart:function(){var d=b(this),c=d.data("esoScroll");if(c.onStart||c.onStop){if(c.onStart&&!c.scrollTimeout){c.onStart.apply(this,[-c.underScroll,-c.overScroll])}clearTimeout(c.scrollTimeout);c.scrollTimeout=setTimeout(a._checkStop,c.onStopDelay,d)}},_checkMove:function(){var d=b(this),c=d.data("esoScroll");if(c.onMove){c.onMove.apply(this,[-c.underScroll,-c.overScroll])}},_checkStop:function(d){var c=d.data("esoScroll");clearTimeout(c.scrollTimeout);if(c.touches==0){c.scrollTimeout=null;if(c.onStop){c.onStop.apply(this,[-c.underScroll,-c.overScroll])}}else{c.scrollTimeout=setTimeout(a._checkStop,c.onStopDelay,d)}},_checkAtTop:function(){var d=b(this),c=d.data("esoScroll");if(c.onAtTop&&c.underScroll>=0&&c.prevUnderScroll<0){c.onAtTop.apply(this,[-c.underScroll,-c.overScroll])}},_checkAtBottom:function(){var d=b(this),c=d.data("esoScroll");if(c.onAtBottom&&c.overScroll>=0&&c.prevOverScroll<0){c.onAtBottom.apply(this,[-c.underScroll,-c.overScroll])}},_checkUnder:function(){var d=b(this),c=d.data("esoScroll");if(c.onUnder&&c.underScroll>0){c.onUnder.apply(this,[-c.underScroll,-c.overScroll])}},_checkOver:function(){var d=b(this),c=d.data("esoScroll");if(c.onOver&&c.overScroll>0){c.onOver.apply(this,[-c.underScroll,-c.overScroll])}},_onTouchStart:function(c){var e=b(this),d=e.data("esoScroll");d.touches+=1},_onTouchEnd:function(c){var e=b(this),d=e.data("esoScroll");d.touches-=1},_onScroll:function(c){var e=b(this),d=e.data("esoScroll");a._refreshScrollData.apply(this);a._checkStart.apply(this);a._checkMove.apply(this);a._checkAtTop.apply(this);a._checkAtBottom.apply(this);a._checkUnder.apply(this);a._checkOver.apply(this)}};b.fn.esoScroll=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist on jQuery.esoScroll")}}}})(jQuery);